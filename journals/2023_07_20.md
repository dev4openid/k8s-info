- # Monitor Application Logs
- Inspect Docker image in container is: `docker logs -f 8c3a101b556a` # image ref / or name
- Inspect k8s pod container image : `kubernetes logs -f webapp-02` # webapps02 is pod name
- Inspect k8s pod container image : `kubernetes logs -f webapp-02 simple-webapp` # webapps02 is pod name; where simple-webapp OR db are to be chosen to inspect the logs ==defaulted container "simple-webapp" out of: simple-webapp, db==
-
- # Application Command
- From docker  `docker run ubuntu sleep 5`  # NoteOR creat a dockerfile FROM ubuntu CMD sleep CMD 5 OR ["sleep", "5]"
- OR FROM ubuntu ENTRYPOINT 10   # becomes docker run ubuntu-sleeper 10
- OR FROM ubuntu ENTRYPOINT ["sleep"] CMD ["5"] # defaults if parameter of 10 **or** is forgotten
- OR ENTRYPOINT can be overridden by a second instance of ENTRYPOINT ["sleep2.0"]
- ```cmake
  # docker example
  docker run --name ubuntu-sleeper \
  	--entrypoint sleep2.0
      ubuntu-sleeper 10
  ```
-
- # K8s Commands and Arguments
-
- For kubernetes `kubectl apply -f pod-definition.yaml`
- ```cmake
  apiVersion: v1
  kind: Pod
  metadata:
  	name: ubuntu-sleeper-pod
  spec:
  	containers:
      - name: ubuntu-sleeper
        image: ubuntu-sleeper
        command:
        	- sleep2.0
        	- "10"
        OR
        command: ["sleep"]
        args: ["15"]
        OR
        command: ["sleep", "20"]
  ```
-
- # K8S Env variables
- For kubernetes `kubectl apply -f pod-definition.yaml`
- ```cmake
  apiVersion: v1
  kind: Pod
  metadata:
  	name: ubuntu-sleeper-pod
  spec:
  	containers:
      - name: ubuntu-sleeper
        image: ubuntu-sleeper
        env:
        	- name: environ_value
             value: "blue"
  
  ```
-
- # K8S Config
- For kubernetes `kubectl apply -f pod-definition.yaml`
- ![Configmaps methods](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-07-20 18-06-04.png)
-
- ```yaml
  spec:
    containers:
    - env:
      - name: APP_COLOR
        valueFrom:
          configMapKeyRef:
            name: webapp-config-map
            key: APP_COLOR
  ```
- OR
- ```yaml
  spec:
    containers:
    - envFrom: 
          configMapRef:
            name: webapp-config-map
  ```
- Also a CLI version is: `kubectl create configmap webapp-config-map --from-literal=APP_COLOR=darkblue`
-
-
-
- *==Note:==* Do NOT forget
- `kubectl replace --force -f new-pod-defintion.yaml    # replace an existing pod`
-
-
- # K8s Secrets
- ![Imperative Secrets](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-07-20 20-33-09.png)
- Imperative Secrets
-
- ![Declarative Secrets](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-07-20 20-36-10.png)
- Declarative Secrets
- ![Encrypt Secret (Data Row iteratively)](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-07-20 20-38-02.png)
- Encrypt Secret (Data Row iteratively)
- Examples:
- ```yaml
  apiVersion: v1
  data:
    DB_Host: c3FsMDE=
    DB_Password: cGFzc3dvcmQxMjM=
    DB_User: cm9vdA==
  kind: Secret
  metadata:
    creationTimestamp: "2023-07-21T12:05:13Z"
    name: db-secret
    namespace: default
    resourceVersion: "988986"
    uid: d4fd2af7-46fc-4b2e-9713-b126d77c1714
  type: Opaque
  ```
- above is db-secret.yaml
- on CLI: `create secret generic db-secret --from-literal=DB_Host=sql01 --from-literal=DB_User=root --from-literal=DB_Password=password123`
-
- How to reference Secrets from Pod
- ```yaml
  spec:
    containers:
    - name: simple-webapp-color
      image: simple-webapp-color
      ports:
      - containrePort: 8080
      envFrom:
      - secretRef:
          configMapKeyRef:
             name: app-secret
  ```
- from a source like secret-data.yaml:
- ```yaml
  apiVersion: v1
  kind: Secret
  metadata:
     name: app-secret
  data:
    DB_HOST: dsfdAasdf=
    DB_User:  CM9vA==
    DB_Password: cGFassd4F
  ```
- *==Note:==* Best practice to encrypt all fields the where / who / password
- Methods of storing Secrets:
- ![Methods of storing Secrets](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-07-20 20-49-56.png)
- Methods of storing Secrets
- ![Each element in Secrets are stored in different files in Volumes](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-07-20 20-50-38.png)
- Each element in Secrets are stored in different files in Volumes
- *==Notes:==* The Secrets are NOT in Git/Github    AND are stored in etcd !!! Use Vault instead
-
- Exmple of Pod-Definition
- ```yaml
  spec
    containers
      env:
        - name: DB_Host
          valueFrom:
            configMapKeyRef:
              name: db-secret
              key: DB_Host
        - name: DB_Password
          valueFrom:
            configMapKeyRef:
              name: db-secret
              key: DB_Password
        - name: DB_User
          valueFrom:
            configMapKeyRef:
              name: db-secret
              key: DB_User
  ```
-
- Exmple of Pod-Definition
- ```yaml
  spec
    containers
    	- envFrom:
    		- secretRef:
              name: db-secret		# db-secret yaml file
  ```
-
-