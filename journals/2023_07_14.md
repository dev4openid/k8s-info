- ## Taints and Tolerations
- Taint is defined in the Node # gives of the smell üôÑ
- ```yaml
  metadata:
    labels:
  	# key: value:taint-effect
      app: blue:NoSchedule      	# alternatives are PreferNoSchedule, NoExecute
  ```
- cli version: `kubectl taint node node01 app=blue:NoSchedule` AND to remove the taint `kubrctl taint node controlplane node-role.kubernetes.io/master:NoScheduler-`       # It is the appending '-' that removes the taint from node
- Tolerance is defined in the Pod  # defines if it is tolerant of the smell üòÅ
- ```yaml
  apiVersion: v1
  kind: Pod
  metadata:
    name: nginx
  spec:
    containers:
    - name: nginx
      image: nginx:1.20.2
      ports:
      - containerPort: 80
    tolerations:	# KOVE			# this drives the aversion (or not) to assoc with Node
    - key: "app"
    	operator: "Equal"
      value: "blue"
      effect: "NoSchedule"	
      		# alternatives are	"PreferNoSchedule", 
      		#					"NoExecute" (evict OLD Pods that cannot tolerate the taint)
      	# NOTE: the above MUST USE ""
  
  ```
- cli version: ?????
-
-
-
- ## Node Selector and Node Affinity:
- ### Node Selector
- Simple model means labelling the node to get the desired effect
- `kubectl label node <node-name> <Label-key>=<label-value>`, an e.g.
- `kubectl label node node01 size=Large` thus the pod now has nodeSelector: of size: Large
-
- ### Node Affinity
- In pod definition:
- ```yaml
  apiVersion: v1                                    
  kind: Pod                                         
  metadata:                                         
    name: nginx                                     
  spec:                                             
    containers:                                     
    - name: nginx                                   
      image: nginx:1.20.2                           
      ports:                                        
      - containerPort: 80                           
    affinity:                                       
      requiredSuringSchedulingIgnoreDuringExecution:          
        nodeSelectorTerms:                          
        - matchExpressions:                         
          - key: size                               
            operator: In  # NotIn alternative                 
            values:                                 
            - Large                                 
              Medium   # to add additional node - gives choice
                                                    
  # OR we can use:                                  
                                                    
    affinity:                                       
      requiredSuringSchedulingIgnoreDuringExecution:
        nodeSelectorTerms:                          
        - matchExpressions:                         
          - key: size                               
            operator: Exists   # or NotExists ?????
  
  ```
- Types of node affinity
	- requiredDuringSchedulingIgnoreDuringExecution
	- preferredDuringSchedulingIgnoreDuringExecution
	- AND soon
	- requiredSuringSchedulingIRequiredDuringExecution
- Therefore for 3 Affinity types:
- ||DuringScheduling|DuringExecution|
  |--|--|--|
  |Type 1|Required|Ignored|
  |Type 2|Preferred|Ignored|
  |Type 3|Required|Required|
-