- ***Command used to download Youtube videos***
- `yt-dlp -f bestvideo+bestaudio/best https://youtu.be/X48VuDVv0do`
- make sure this is yt-dlp is the latest version
- /
- # Kubernetes (Nana)
- Full Kubernetes Tutorial | Kubernetes Course | Hands-on course with a lot of demos {{video https://www.youtube.com/watch?v=X48VuDVv0do}} 
  
  ðŸ’™ Become a Kubernetes Administrator - CKA: [https://bit.ly/3MQtij9](https://bit.ly/3MQtij9)
  
  ðŸ’š Become a DevOps Engineer - full educational program: [https://bit.ly/3MRjKEE](https://bit.ly/3MRjKEE)
  
  ðŸ§¡ Udemy courses: [https://bit.ly/3BQkjbz](https://bit.ly/3BQkjbz)
  
  #kubernetes #techworldwithnana
  
  Connect with me ðŸ‘‹
  
  INSTAGRAM â–º [https://bit.ly/2F3LXYJ](https://bit.ly/2F3LXYJ)
  
  LINKEDIN â–º [https://bit.ly/3hWOLVT](https://bit.ly/3hWOLVT)
  
  â–¬â–¬â–¬â–¬â–¬â–¬ T I M E S T A M P S â° â–¬â–¬â–¬â–¬â–¬â–¬
  0:00 - Course Overview
  2:18 - What is K8s
  5:20 - Main K8s Components
  22:29 - K8s Architecture
  34:47 - Minikube and kubectl - Local Setup
  44:52 - Main Kubectl Commands - K8s CLI
  1:02:03 - K8s YAML Configuration File
  1:16:16 - Demo Project: MongoDB and MongoExpress
  1:46:16 - Organising your components with K8s Namespaces
  2:01:52 - K8s Ingress explained
  2:24:17 - Helm - Package Manager
  2:38:07 - Persisting Data in K8s with Volumes
  2:58:38 - Deploying Stateful Apps with StatefulSet
  3:13:43 - K8s Services explained
  
  â–¬â–¬â–¬â–¬â–¬â–¬ COURSE OVERVIEW ðŸ“š â–¬â–¬â–¬â–¬â–¬â–¬
  ðŸ”¥ What is Kubernetes ðŸ”¥ 
  â–º What problems does Kubernetes solve?
  â–º What features do container orchestration tools offer?
  
  ðŸ”¥ Main K8s Components ðŸ”¥
  â–º Node & Pod
  â–º Service & Ingress
  â–º ConfigMap & Secret
  â–º Volumes
  â–º Deployment & StatefulSet
  
  ðŸ”¥ K8s Architecture ðŸ”¥
  â–º Worker Nodes
  â–º Master Nodes
  â–º Api Server
  â–º Scheduler
  â–º Controller Manager
  â–º etcd - the cluster brain
  
  ðŸ”¥ Minikube and kubectl - Local Setup ðŸ”¥
  â–º What is minikube?
  â–º What is kubectl?
  â–º install minikube and kubectl
  â–º create and start a minikube cluster
  
  ðŸ”— Links:
  
  Install Minikube (Mac, Linux and Windows): [https://bit.ly/38bLcJy](https://bit.ly/38bLcJy)
  
  Install Kubectl: [https://bit.ly/32bSI2Z](https://bit.ly/32bSI2Z)
  
  Gitlab: If you are using Mac, you can follow along the commands. I listed them all here: [https://bit.ly/3oZzuHY](https://bit.ly/3oZzuHY)
  
  ðŸ”¥ Main Kubectl Commands - K8s CLI ðŸ”¥
  â–º Get status of different components
  â–º create a pod/deployment
  â–º layers of abstraction
  â–º change the pod/deployment
  â–º debugging pods
  â–º delete pod/deployment
  â–º CRUD by applying configuration file
  
  ðŸ”— Links:
  
  Git repo link of all the commands: [https://bit.ly/3oZzuHY](https://bit.ly/3oZzuHY)
  
  ðŸ”¥ K8s YAML Configuration File ðŸ”¥
  â–º 3 parts of a Kubernetes config file (metadata, specification, status)
  â–º format of configuration file
  â–º blueprint for pods (template)
  â–º connecting services to deployments and pods (label & selector & port)
  â–º demo
  
  ðŸ”— Links:
  
  Git repo link: [https://bit.ly/2JBVyIk](https://bit.ly/2JBVyIk)
  
  ðŸ”¥ Demo Project ðŸ”¥
  â–º Deploying MongoDB and Mongo Express
  â–º MongoDB Pod
  â–º Secret
  â–º MongoDB Internal Service
  â–º Deployment Service and Config Map
  â–º Mongo Express External Service
  
  ðŸ”— Links:
- Git repo link: [https://bit.ly/3jY6lJp](https://bit.ly/3jY6lJp)
  
  ðŸ”¥ Organizing your components with K8s Namespaces ðŸ”¥
  â–º What is a Namespace?
  â–º 4 Default Namespaces
  â–º Create a Namespace
  â–º Why to use Namespaces? 4 Use Cases
  â–º Characteristics of Namespaces
  â–º Create Components in Namespaces
  â–º Change Active Namespace
  
  ðŸ”— Links:
  
  Install Kubectx: [https://github.com/ahmetb/kubectx#ins](https://github.com/ahmetb/kubectx#ins)...
  
  ðŸ”¥ K8s Ingress explained ðŸ”¥
  â–º What is Ingress? External Service vs. Ingress
  â–º Example YAML Config Files for External Service and Ingress
  â–º Internal Service Configuration for Ingress
  â–º How to configure Ingress in your cluster?
  â–º What is Ingress Controller?
  â–º Environment on which your cluster is running (Cloud provider or bare metal)
  â–º Demo: Configure Ingress in Minikube
  â–º Ingress Default Backend
  â–º Routing Use Cases
  â–º Configuring TLS Certificate
  
  ðŸ”— Links:
  
  Git Repo: [https://bit.ly/3mJHVFc](https://bit.ly/3mJHVFc)
  
  Ingress Controllers: [https://bit.ly/32dfHe3](https://bit.ly/32dfHe3)
  
  Ingress Controller Bare Metal: [https://bit.ly/3kYdmLB](https://bit.ly/3kYdmLB)
  
  ðŸ”¥ Helm - Package Manager ðŸ”¥
  â–º Package Manager and Helm Charts
  â–º Templating Engine
  â–º Use Cases for Helm
  â–º Helm Chart Structure
  â–º Values injection into template files
  â–º Release Management / Tiller (Helm Version 2!)
  
  ðŸ”— Links:
  
  Helm hub: [https://hub.helm.sh/](https://hub.helm.sh/)
  
  Helm charts GitHub Project: [https://github.com/helm/charts](https://github.com/helm/charts)
  
  Install Helm: [https://helm.sh/docs/intro/install/](https://helm.sh/docs/intro/install/)
  
  ðŸ”¥ Persisting Data in K8s with Volumes ðŸ”¥
  â–º The need for persistent storage & storage requirements
  â–º Persistent Volume (PV)
  â–º Local vs Remote Volume Types
  â–º Who creates the PV and when?
  â–º Persistent Volume Claim (PVC)
  â–º Levels of volume abstractions
  â–º ConfigMap and Secret as volume types
  â–º Storage Class (SC)
  
  ðŸ”— Links:
  
  Git Repo: [https://bit.ly/2Gv3eLi](https://bit.ly/2Gv3eLi)
  
  ðŸ”¥ Deploying Stateful Apps with StatefulSet ðŸ”¥
  â–º What is StatefulSet? Difference of stateless and stateful applications
  â–º Deployment of stateful and stateless apps
  â–º Deployment vs StatefulSet
  â–º Pod Identity
  â–º Scaling database applications: Master and Worker Pods
  â–º Pod state, Pod Identifier
  â–º 2 Pod endpoints
  
  ðŸ”¥ K8s Services ðŸ”¥
  â–º What is a Service in K8s and when we need it?
  â–º ClusterIP Services
  â–º Service Communication
  â–º Multi-Port Services
  â–º Headless Services
  â–º NodePort Services
  â–º LoadBalancer Services
-
- ## ==K8S Main Components== (00:22:29)
	- ***volumes***
	- ***configmap***
	- **secrets***
	- ***pod***
	- ***service***
	- ***ingress***
	- ***(deployment)***
	- ***(sts)***
-
- ## Minikube and kubectl - Local Setup (00:34:47)
- ### ==Worker Node Processes==
	- cri
	- kubelet
	- kubeproxy
- ### ==Master Processes==
	- api server  (cluster gateway & authentication gateway)
	- scheduler
	- controller manager
	- etcd  (cluster brain!)
- ## Main Kubectl Commands - K8s CLI  (00:44:52)
- ### minikube
- minikube start / stop / delete / status
- minikube dashboard (overview of env and can do more! - more later)
- example `minikube start --nodes 2 -p local-cluster  --disk-size='5gb' --driver=docker` (*optional is ---> namespace=learn*) --> careful here on what thew driver facilitates irt services!! e.g. quemu or quemu2
	- the input allow options such as namespave, disk alloc, driver to be use, etc.   `minikube start --help`
- `minikube status`
	- result are similar to:
		- minikube
		  type: Control Plane
		  host: Running
		  kubelet: Running
		  apiserver: Running
		  kubeconfig: Configured
- ### kubectl
- `kubectl version`
- create deployment   (abstraction over pods)
	- `kubectl create deployment nginx-depl --image=nginx` -- image can be versioned to nginx:1.16 as e.g.
	- with the result of a pod instance
	- Note: kubctl create deployment .........results in:
		- blueprint for creating pods
		- most basic configuration for deployment (name and image to be used)
		- rest are defaults (unless specified)
- `kubectl get deployment`
	- NAME         READY   UP-TO-DATE   AVAILABLE   AGE
	  nginx-depl   1/1          1                     1                    19s
- `kubectl get pod`
	- NAME                                           READY   STATUS    RESTARTS   AGE
	  nginx-depl-56cb8b6d7-pwlmz   1/1         Running    0                  34m
- `kubectl exec -it nginx-depl-56cb8b6d7-pwlmz -- bin/bash`
	- root@nginx-depl-56cb8b6d7-pwlmz:/#   ---> this allows root control of pod itself
- `kubectl edit deployment`
	- ```0 # Please edit the object below. Lines beginning with a '#' will be ignored,
	   # and an empty file will abort the edit. If an error occurs while saving this file will be
	   # reopened with the relevant failures.
	   #
	   apiVersion: apps/v1
	   kind: Deployment
	   metadata:
	     annotations:
	       deployment.kubernetes.io/revision: "1"
	     creationTimestamp: "2023-06-15T16:44:19Z"
	     generation: 1
	     labels:
	       app: nginx-depl
	     name: nginx-depl
	     namespace: default
	     resourceVersion: "579"
	     uid: 6275d61d-07e6-4f0f-85ed-2501e40ce828
	   spec...
	  ```
	-
- Note: the kubectl deployment can be manipulated by:
	- `kubectl create deployment ...`
	- `kubectl edit deployment ...`
	- `kubectl delete deployment ...`
	-
- `kubectl get replicaset`
	- NAME                               DESIRED   CURRENT   READY   AGE
	  nginx-depl-56cb8b6d7   1                1                  1             53m
-
- Note: By editing the deployment replicasets and/or other configs realising in the outcome desired
- ***Note:***
	- Deployment manages a ..
	  Replicaset manages a ..
	  Pod is an abstraction of ..
	  Container
- `kubectl apply -f config-file.yaml`
	- *deployment.apps/nginx-deployment created*
	  *deployment.apps/nginx-deployment configured*
	- Note the difference above - 1 to create and 1 to change the config
-
- Summary:  (01:01:43)
	- Status of different K8s components:
		- kubectl get nodes | service | replicaset | deployment
	- Debugging pods:
		- log to console ---> `kubectl logs nginx-deployment-68d9b6c666-ksx2w` [pod name]
		- `kubectl describe pod nginx-deployment-68d9b6c666-ksx2w`
		- `kubectl exec -it inx-deployment-68d9b6c666-ksx2w -- bin/bash` ---> this is to get into pod instance
- TIP: To delete a Service OR/AND Pod OR/AND Deployment use:
	- `kubectl delete service nginx-service`
	- `kubectl delete pod nginx-service`
	- `kubectl delete deployment  nginx2-depl`
- ## K8s YAML Configuration File (01:02:03)
- ### Creating a yaml file
- Firstly there is always a Deployment and a Service yaml file (Need both)
	- Deployment to define what is to be instantiated
	- Service is to define how the Deployment is to be accessed
- ![Metadata](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-06-20 13-38-12.png)
- Metadata
- ![Specification](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-06-20 13-42-30.png)
- Specification for Deployment and/or Service
- ![Deployment and/or Service](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-06-20 13-44-11.png)
- Deployment and Service files (could include Mounting etc.)   Note the apiversion DIFFERENCE in format!
- ![image.png](../assets/image_1686861013734_0.png)
- Attributes of "spec" are specific to kind of file (Deployment vs. Service)
- 3 parts!
	- 1. metadata
	  2. specification
	  3. status (Notice: automatically generated on instatiation by k8s)
- Note: all status is found in etcd
-
- ![image.png](../assets/image_1686905575254_0.png)
- Note: the concept of spec within a spec  - this is the actual deployable config - same goes for the service spec
- ==etcd provides the "defaults" for all Deployments/Services==
- ### Blueprint for Pods (Templates)
- ==Structure of yaml file:==
	- ```
	  apiVersion:
	  kind:
	  metadata
	  spec
	  ```
- ### Template
- ![Pod Specification](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-06-20 15-43-01.png)
- Pod Specification
- ### Connecting components (labels, selectors and ports)
- ![Connecting Deployments to Pods](/home/briandanks/Pictures/Screenshots/Screenshot from 2023-06-20 15-47-49.png)
- Connecting Deployments to Pods
- ![image.png](../assets/image_1686905760664_0.png)
- Connecting Services to Deployments
- Note the Service selector allow access to the deployment at BOTH the Deployment level AND the Pod level - i.e. the Sevice is attached to all Deployment of nginx, which have a 1 or more Pod/s in it! Only then it is applied (This is the reason for the metadata labels and selector)
- ![image.png](../assets/image_1686906061887_0.png)
- Note: The Deployment is the Internal port that 'nginx' is exposing whereas the Service maps the external access port (a la 80) and maps this to the containerPort (Deploy/Serv are 8080)
-
- # Reflect Deployment AND/OR Service
- `kubectl descibe service nginx-service`
- `kubectl describe deployment nginx-deploy`
- this reconciles with the source yaml files.   Check this out!
-
- AND use `kubectl get pod -o wide` to reconcile the S is attched to the correct Pod IPs
- AND use `kubectl get deployment nginx-deployment -o yaml` to look at the deployment in yaml format - as below: ---> Note this is returned from etcd
	- ;![image.png](../assets/image_1686910979459_0.png)
- NOTE: By deleting the source file the deployment/service is "removed"
	- `kubectl delete -f nginx-deployment.yaml`
	- `kubectl delete -f nginx-service.yaml`
	- Note: be careful as this is not production method as in production all sources are in git!